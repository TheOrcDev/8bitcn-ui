echo 'ğŸª“ğŸ—ï¸ğŸ‘¹ Preparing orc axes for the mighty project conquest! ğŸ‘¹ğŸ—ï¸ğŸª“'
echo 'Get ready for battle, this may take a while...'

# Check Orcish Code Standards
npx lint-staged

pnpm lint ||
(
    echo "âš”ï¸âŒ Grargh, you have encountered an issue in your code. Check the orcish runes! âš”ï¸âŒ
          Run pnpm lint, make changes, and try the conquest again.";
    false;
)

echo 'ğŸ‰ No problems found: initiating orcish conquest now.... âœ¨ğŸš€ğŸ¹ğŸ›¡ï¸'

pnpm registry:build 

TARGET_FILE="public/r"
DIFF_OUTPUT=$(git diff -- "$TARGET_FILE")
if [ -n "$DIFF_OUTPUT" ]; then
  echo "âš”ï¸âŒ You forgot to run the command 'pnpm registry:build' before committing. âš”ï¸âŒ"
  echo "I have run this for you."
  echo "Please stage the file in $TARGET_FILE before committing."
  echo "And, don't forget to run the command next time before committing!"
  exit 1
else
  echo "ğŸ‰ No unstaged changes in $TARGET_FILE. Proceeding with commit.âœ¨ğŸš€ğŸ¹ğŸ›¡ï¸"
  exit 0
fi
